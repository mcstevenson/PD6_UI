"use strict";(self.webpackChunkangular_registration_login_example=self.webpackChunkangular_registration_login_example||[]).push([[924],{9924:(V,l,d)=>{d.r(l),d.d(l,{UsersJobModule:()=>B});var c=d(433),p=d(6895),u=d(9230),t=d(8256);let f=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA()())},dependencies:[u.lC],encapsulation:2}),o})();var m=d(590),_=d(6082);function g(o,n){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[0])}}function x(o,n){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Oqu(i.jobStatus[e.status])}}function Z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateSatus(s.jobId,1))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[1])}}function J(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateSatus(s.jobId,1))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[1])}}function v(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateSatus(s.jobId,2))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[2])}}function C(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateSatus(s.jobId,3))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[3])}}function A(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateSatus(s.jobId,4))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.jobStatus[4])}}function h(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,g,2,1,"td",7),t.YNc(8,x,2,1,"td",7),t.TgZ(9,"td",10)(10,"a",11),t._uU(11,"View"),t.qZA(),t.YNc(12,Z,2,1,"button",12),t.YNc(13,J,2,1,"button",12),t.YNc(14,v,2,1,"button",12),t.YNc(15,C,2,1,"button",12),t.YNc(16,A,2,1,"button",12),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.AsE("",e.clientFirstName," ",e.clientLastName,""),t.xp6(2),t.Oqu(e.postCode),t.xp6(2),t.Oqu(e.timeSlot),t.xp6(1),t.Q6J("ngIf",!e.status),t.xp6(1),t.Q6J("ngIf",e.status),t.xp6(2),t.MGl("routerLink","./userJobs/",e.jobId,""),t.xp6(2),t.Q6J("ngIf",!e.status),t.xp6(1),t.Q6J("ngIf",0==e.status),t.xp6(1),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status)}}function q(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",14),t._UZ(2,"span",15),t.qZA()())}let T=(()=>{class o{constructor(e){this.accountService=e,this.jobStatus=["Assigned","On the way","Checkin","Emergency","CheckinOut"],this.processId=null}ngOnInit(){this.accountService.getAllJobs().pipe((0,m.P)()).subscribe(e=>{let i=e.filter(s=>s.status!=this.jobStatus[0]||s.status!=this.jobStatus[4]||s.status!=this.jobStatus[3]);i.length>1&&(this.processId=i[0].jobId),this.jobs=e})}updateSatus(e,i){this.jobs.find(r=>r.jobId===e),this.jobs?.filter(r=>r.jobId===e).forEach(r=>r.status=i),this.accountService.updateSatus(e,{status:i}).pipe((0,m.P)()).subscribe(()=>this.jobs)}deleteUser(e){this.jobs.find(s=>s.jobId===e).isDeleting=!0,this.accountService.delete(e).pipe((0,m.P)()).subscribe(()=>this.jobs=this.jobs.filter(s=>s.jobId!==e))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.B))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:24,vars:2,consts:[["routerLink","addJob",1,"btn","btn-sm","btn-success","mb-2"],[1,"jobMapList"],[1,"jobList"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mapJob"],["src","./assets/images/map.png"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1,"Appointments"),t.qZA(),t.TgZ(2,"a",0),t._uU(3,"Add Appointment"),t.qZA(),t.TgZ(4,"div",1)(5,"div",2)(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),t._uU(10,"Client Name"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Post Code"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"Time slot"),t.qZA(),t.TgZ(15,"th",5),t._uU(16,"Status"),t.qZA(),t.TgZ(17,"th",5),t._uU(18,"Action"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,h,17,12,"tr",6),t.YNc(21,q,3,0,"tr",7),t.qZA()()(),t.TgZ(22,"div",8),t._UZ(23,"img",9),t.qZA()()),2&e&&(t.xp6(20),t.Q6J("ngForOf",i.jobs),t.xp6(1),t.Q6J("ngIf",!i.jobs))},dependencies:[p.sg,p.O5,u.yS],styles:['.jobMapList[_ngcontent-%COMP%]{display:grid;grid-template-areas:"jobList jobList jobList jobMap"}.jobList[_ngcontent-%COMP%]{grid-area:jobList}.mapJob[_ngcontent-%COMP%]{grid-area:jobMap;margin:0 10px}.mapJob[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;width:400px;object-fit:contain;position:relative}']}),o})();function U(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"First Name is required"),t.qZA())}function I(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,U,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.clientFirstName.errors.required)}}function j(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Last Name is required"),t.qZA())}function N(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,j,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.clientLastName.errors.required)}}function S(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Address is required"),t.qZA())}function L(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,S,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.address.errors.required)}}function y(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Postcode is required"),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,y,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.postCode.errors.required)}}function Q(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"timeSlot is required"),t.qZA())}function Y(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,Q,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.timeSlot.errors.required)}}function E(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Notes are required"),t.qZA())}function k(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,E,2,0,"div",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.notes.errors.required)}}function F(o,n){1&o&&t._UZ(0,"span",19)}const a=function(o){return{"is-invalid":o}};function M(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onSubmit())}),t.TgZ(1,"div",3)(2,"div",4)(3,"label",5),t._uU(4,"Client First Name"),t.qZA(),t._UZ(5,"input",6),t.YNc(6,I,2,1,"div",7),t.qZA(),t.TgZ(7,"div",4)(8,"label",5),t._uU(9,"Client Last Name"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,N,2,1,"div",7),t.qZA()(),t.TgZ(12,"div",3)(13,"div",4)(14,"label",5),t._uU(15,"Address"),t.qZA(),t._UZ(16,"input",9),t.YNc(17,L,2,1,"div",7),t.qZA(),t.TgZ(18,"div",4)(19,"label",5),t._uU(20,"Postcode"),t.qZA(),t._UZ(21,"input",10),t.YNc(22,w,2,1,"div",7),t.qZA()(),t.TgZ(23,"div",3)(24,"div",4)(25,"label",5),t._uU(26,"Time slot"),t.qZA(),t._UZ(27,"input",11),t.YNc(28,Y,2,1,"div",7),t.qZA(),t.TgZ(29,"div",4)(30,"label",5),t._uU(31,"Notes"),t.qZA(),t._UZ(32,"input",12),t.YNc(33,k,2,1,"div",7),t.qZA()(),t.TgZ(34,"div",13)(35,"button",14),t.YNc(36,F,1,0,"span",15),t._uU(37," Save "),t.qZA(),t.TgZ(38,"a",16),t._uU(39,"Cancel"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("ngClass",t.VKq(15,a,e.submitted1&&e.f.clientFirstName.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.clientFirstName.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(17,a,e.submitted1&&e.f.clientLastName.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.clientLastName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(19,a,e.submitted1&&e.f.address.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.address.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(21,a,e.submitted1&&e.f.postCode.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.postCode.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(23,a,e.submitted1&&e.f.timeSlot.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.timeSlot.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(25,a,e.submitted1&&e.f.notes.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted1&&e.f.notes.errors),t.xp6(2),t.Q6J("disabled",e.submitting1),t.xp6(1),t.Q6J("ngIf",e.submitting1)}}function O(o,n){1&o&&(t.TgZ(0,"div",20),t._UZ(1,"span",21),t.qZA())}let b=(()=>{class o{constructor(e,i,s,r,G){this.formBuilder=e,this.route=i,this.router=s,this.accountService=r,this.alertService=G,this.loading1=!1,this.submitting1=!1,this.submitted1=!1}ngOnInit(){this.jobId=this.route.snapshot.params.jobId,this.form=this.formBuilder.group({clientFirstName:["",c.kI.required],clientLastName:["",c.kI.required],postCode:["",c.kI.required],notes:["",c.kI.required],address:["",c.kI.required],timeSlot:["",c.kI.required],...this.jobId?[]:[c.kI.required]}),this.title="Add Appointments",this.jobId&&(this.title="Edit Appointments",this.loading1=!0,this.accountService.getJobById(this.jobId).pipe((0,m.P)()).subscribe(e=>{this.form.patchValue(e),this.loading1=!1}))}get f(){return this.form.controls}onSubmit(){this.submitted1=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting1=!0,this.saveJob().pipe((0,m.P)()).subscribe({next:()=>{this.alertService.success("Job saved",{keepAfterRouteChange:!0}),this.router.navigateByUrl("/userJobs")},error:e=>{this.alertService.error(e),this.submitting1=!1}}))}saveJob(){return this.jobId?this.accountService.updateJobs(this.jobId,this.form.value):this.accountService.registerJob(this.form.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(_.B),t.Y36(_.c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:4,vars:3,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center m-5",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"mb-3","col"],[1,"form-label"],["type","text","formControlName","clientFirstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","clientLastName",1,"form-control",3,"ngClass"],["type","text","formControlName","address",1,"form-control",3,"ngClass"],["type","text","formControlName","postCode",1,"form-control",3,"ngClass"],["type","text","formControlName","timeSlot",1,"form-control",3,"ngClass"],["type","text","formControlName","notes",1,"form-control",3,"ngClass"],[1,"mb-3"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/usersJobs",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"text-center","m-5"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.qZA(),t.YNc(2,M,40,27,"form",0),t.YNc(3,O,2,0,"div",1)),2&e&&(t.xp6(1),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",!i.loading1),t.xp6(1),t.Q6J("ngIf",i.loading1))},dependencies:[p.mk,p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.yS],encapsulation:2}),o})();const K=[{path:"",component:f,children:[{path:"",component:T},{path:"addJob",component:b},{path:"userJobs/:jobId",component:b}]}];let P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(K),u.Bz]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,c.UX,P]}),o})()}}]);